## Complete Workflow Example

**⚠️ CRITICAL: You MUST include ALL parameters shown in this example. Do NOT omit any required parameters.**

```json
{
  "workflow_id": "<scheduler_generated_id>",
  "workflow_name": "taxonomic-classification-workflow",
  "version": "1.0",
  "base_context": {
    "base_url": "https://www.bv-brc.org",
    "workspace_output_folder": "/USERNAME/home/WorkspaceOutputFolder"
  },
  "workflow_outputs": [
    "${steps.taxonomic_classification.outputs.classification_report}"
  ],
  "steps": [
    {
      "step_id": "<scheduler_generated_id>",
      "step_name": "taxonomic_classification",
      "app": "TaxonomicClassification",
      "params": {
        "host_genome": "no_host",
        "analysis_type": "16S",
        "srr_libs": [
          {
            "title": "Sample description",
            "srr_accession": "SRR12345678",
            "sample_id": "SRR12345678_sample"
          }
        ],
        "database": "SILVA",
        "save_classified_sequences": false,
        "save_unclassified_sequences": false,
        "confidence_interval": 0.1,
        "output_path": "${workspace_output_folder}/TaxonClassification",
        "output_file": "taxon_classification_report"
      },
      "outputs": {
        "classification_report": "${params.output_path}/.${params.output_file}/Taxonomic-Classification-Service-BVBRC_multiqc_report.html",
        "job_result_path": "${params.output_path}/.${params.output_file}"
      },
      "depends_on": []
    }
  ]
}
```

### ✅ REQUIRED PARAMETERS CHECKLIST

**You MUST include ALL of these parameters in your workflow:**

- ✅ `host_genome` (required - use "no_host" if not specified)
- ✅ `analysis_type` (required - use "16S" if not specified)
- ✅ `database` (required - use "SILVA" if not specified)
- ✅ `output_path` (required - use "${workspace_output_folder}/ProjectName" format)
- ✅ `output_file` (required - descriptive filename without extension)
- ✅ `srr_libs` OR `paired_end_libs` OR `single_end_libs` (at least one input source required)

**Output requirements:**
- ✅ Output name MUST be `"classification_report"` (NOT "report" or other names)
- ✅ Output path MUST use: `"${params.output_path}/.${params.output_file}/Taxonomic-Classification-Service-BVBRC_multiqc_report.html"`

## Parameters

**⚠️ REQUIRED PARAMETERS (MUST include all of these):**
  - host_genome: Host genome for filtering (required, default: "no_host")
  - analysis_type: Analysis type - pathogen/microbiome/16S (required, default: "16S")
  - database: Reference database - bvbrc/greengenes/silva/standard (required, default: "SILVA")
  - output_path: Output directory (required)
  - output_file: Output basename (required)

**Optional Parameters:**
  - paired_end_libs: Paired-end read libraries with sample IDs (optional)
  - single_end_libs: Single-end read libraries with sample IDs (optional)
  - srr_libs: SRA datasets with sample IDs (optional). 
    
    CRITICAL: srr_libs MUST be an array of objects. Each object MUST contain exactly three fields:
      - "title": String description of the sample (required)
      - "srr_accession": String SRA run accession (e.g., "SRR12345678") (required)
      - "sample_id": String unique identifier for the sample (required)
    
    Format: array of objects with "title", "srr_accession", and "sample_id" fields.
    
    Example for a single SRA ID:
    [
      {
        "title": "Sample title or description",
        "srr_accession": "SRR12345678",
        "sample_id": "SRR12345678_sample"
      }
    ]
    
    Example for multiple SRA IDs:
    [
      {
        "title": "Sample 1 description",
        "srr_accession": "SRR12345678",
        "sample_id": "SRR12345678_sample1"
      },
      {
        "title": "Sample 2 description",
        "srr_accession": "SRR87654321",
        "sample_id": "SRR87654321_sample2"
      }
    ]
    
    COMMON MISTAKES TO AVOID:
    ❌ DO NOT use "srr_id" or "srr_ids" - these are incorrect parameter names
    ❌ DO NOT use a simple string array like ["SRR12345678"] - must be array of objects
    ❌ DO NOT omit any of the three required fields (title, srr_accession, sample_id)
    ✅ DO use "srr_libs" with array of objects containing all three fields
    
  - save_classified_sequences: Save classified sequences (optional, default: false)
  - save_unclassified_sequences: Save unclassified sequences (optional, default: false)
  - confidence_interval: Classification confidence threshold (optional, default: 0.1)

At least one input source (paired_end_libs, single_end_libs, or srr_libs) must be provided.

## Critical Reminders

⚠️ **CRITICAL FOR srr_libs**:
- MUST be a JSON array of objects (NOT a string!)
- Each object MUST have exactly: "title", "srr_accession", "sample_id"
- NEVER use "srr_id" - use "srr_accession" instead
- Example: `[{"title": "...", "srr_accession": "SRR12345678", "sample_id": "..."}]`

⚠️ **REQUIRED PARAMETERS** (must include all):
- host_genome (required, default: "no_host")
- analysis_type (required, default: "16S")
- database (required, default: "SILVA")
- output_path (required)
- output_file (required)

⚠️ **OUTPUT PATTERNS**:
- Use: `"${params.output_path}/.${params.output_file}/Taxonomic-Classification-Service-BVBRC_multiqc_report.html"`
- Output name must be: `"classification_report"` (not "report" or other names)
